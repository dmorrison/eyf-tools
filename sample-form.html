<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Static Template</title>
  </head>
  <body>
    <form>
      <label for="name">Name:</label><br />
      <input type="text" id="name" name="name" /><br />
      <label for="email">Email:</label><br />
      <input type="email" id="email" name="email" /><br />
      <label for="password">Password:</label><br />
      <input type="password" id="password" name="password" /><br />
      <label for="bio">Bio:</label><br />
      <textarea id="bio" name="bio"></textarea><br />
      <label for="image">Image:</label><br />
      <input type="file" id="image" name="image" /><br /><br />
      <input type="submit" value="Submit" />
    </form>

    <img id="test-image" />

    <script>
      function logSubmit(event) {
        console.log(`Form Submitted! Time stamp: ${event.timeStamp}`);

        const response = fetch(
          "https://pcqu45672xh4vva7orjff5rqly0epqhl.lambda-url.us-east-2.on.aws",
          {
            method: "POST",
            headers: {
              "Content-Type": "text/plain" // Need to send as text/plain for CORS.
            },
            body: JSON.stringify({
              InitialLiquidBalance: 200000,
              OriginalLoanAmount: 189600,
              CurrentMortgageRate: 0.0475,
              NumMonths: 360,
              RemainingNumberOfMonthsOnCurrentLoan: 287,
              NewLoanAmount: 169455.74,
              NewInterestRate: 0.038,
              NumMonthsNewLoan: 360,
              ReFiCost: 4345,
              MarketReturnRate: 0.07,
              ShowCashOutRefi: true,
              NewLoanAmountV2: 280000,
              Show15yearRefi: true,
              New15yearInterestRate: 0.032,
              NumMonthsNewLoan15year: 180
            })
          }
        )
          .then((response) => response.json())
          .then((data) => {
            for (const base64Image of Object.values(data.images)) {
              const img = document.createElement("img");
              img.src = `data:image/png;base64, ${base64Image}`;
              document.body.appendChild(img);
            }
          });

        event.preventDefault();
      }

      const form = document.querySelector("form");
      form.addEventListener("submit", logSubmit);
    </script>
  </body>
</html>
